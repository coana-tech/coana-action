#!/bin/sh -l

APIKEY=$1
PROJECT_PATH=$2
DEBUG=$3
REPO_URL=$4
PROJECT_NAME=$5
TIMEOUT=$6

COMMAND="coana run $PROJECT_PATH --api-key $APIKEY"

if [ -z "$REPO_URL"  ] && [ -z "$PROJECT_NAME" ]; then
    echo "either repoUrl or projectName is required"
    exit 1
fi

if [ "$DEBUG" = "true" ]; then
    COMMAND="$COMMAND --debug"
fi

# Check each optional argument and append to command if they're provided
if [ ! -z "$REPO_URL" ]; then
    COMMAND="$COMMAND --repo-url $REPO_URL"
fi

if [ ! -z "$PROJECT_NAME" ]; then
    COMMAND="$COMMAND --project-name $PROJECT_NAME"
fi

if [ ! -z "$TIMEOUT" ]; then
    COMMAND="$COMMAND --timeout $TIMEOUT"
fi


# Execute the command
eval "$COMMAND"

